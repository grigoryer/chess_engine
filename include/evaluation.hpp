#pragma once
#include <position.hpp>
#include <constants.hpp>




const std::array<int, 64> KING_EVAL_MAP =
{
30,  55,  10,   0,   0,  10,  55,  30,   // rank 1
0,  0,   0,   0,   0,   0,  0,  0,   // rank 2
-10, -10, -20, -30, -30, -20, -10, -10,   // rank 3
-20, -30, -40, -50, -50, -40, -30, -20,   // rank 4
-30, -40, -50, -60, -60, -50, -40, -30,   // rank 5
-40, -50, -60, -70, -70, -60, -50, -40,   // rank 6
-50, -60, -70, -80, -80, -70, -60, -50,   // rank 7
-60, -70, -80, -90, -90, -80, -70, -60    // rank 8
};


const std::array<int, 64> KING_LATE_EVAL_MAP =
{
-20,  -10, -5, -5, -5, -5,  -10,  -20,
-10, 0, 5, 5, 5, 5, 0, -10,
-10, 20, 25, 25, 25, 25, 20, -10,
-10, 20, 25, 35, 35, 25, 20, -10,
-10, 20, 25, 35, 35, 25, 20, -10,
-10, 20, 25, 25, 25, 25, 20, -10,
-10, 5, 10, 10, 10, 10, 5, -10,
-10,  -5, -5, -5, -5, -5,  -5, -10
};



const std::array<int, NUM_SQUARES> ROOK_EVAL_MAP = 
{
-15,  -5,  35,  45,  45,  35,  -5,  -15,
15,  15, 25, 25, 25, 25,  15,  15,
0,  0, 15, 25, 25, 25,  0,  0,
0,  0, 15, 25, 25, 25,  0,  0,
0,  0, 15, 25, 25, 25,  0,  0,
0,  0, 15, 25, 25, 25,  0,  0,
25,  25, 35, 45, 45, 35,  25,  25,
0,  0, 15, 15, 15, 15,  0,  0
};

const std::array<int, NUM_SQUARES> BISHOP_EVAL_MAP =
{
-20, -15, -10, -5, -5, -10, -15, -20,
-5, 5, 5, 5, 5, 5, 5, -5, 
-5, 5, 25, 25, 25, 25, 5, -5, 
-5, 5, 25, 35, 35, 25, 5, -5, 
-5, 5, 25, 35, 35, 25, 5, -5, 
-5, 5, 25, 25, 25, 25, 5, -5, 
-5, 5, 5, 5, 5, 5, 5, -10, 
-20, -15, -10, -5, -5, -10, -15, -20
};


const std::array<int, NUM_SQUARES> KNIGHT_EVAL_MAP = 
{
-35, -25,  -15,  -15,  -15,  -15, -25, -35,
-15,   0, 15, 15, 15, 15,   0, -15,
-15,  15, 40, 40, 40, 40,  15,   -15,
-15,  15, 40, 55, 55, 40,  15,   -15,
-15,  15, 40, 55, 55, 40,  15,   -15,
-15,  15, 30, 30, 30, 30,  15,   -15,
-15,   0, 15, 15, 15, 15,   0, -15,
-30, -15,  -5,  -5, -5, -5, -5, -30
};


const std::array<int, NUM_SQUARES> QUEEN_EVAL_MAP = 
{
0,  0, 15, 15, 15, 15,  0,  0,
0, 15, 30, 30, 30, 30, 15,  0,
15, 30, 45, 45, 45, 45, 30, 15,
15, 30, 45, 65, 65, 45, 30, 15,
15, 30, 45, 65, 65, 45, 30, 15,
15, 30, 45, 45, 45, 45, 30, 15,
0, 15, 30, 30, 30, 30, 15,  0,
0,  0, 15, 15, 15, 15,  0,  0
};


const std::array<int, 64> PAWN_EVAL_MAP =
{
0,  0,  0,  0,  0,  0,  0,  0,   // rank 1
5,  5,  5,  5,  5,  5,  5,  5,   // rank 2
10, 10, 20, 30, 30, 20, 10, 10,
15, 15, 40, 55, 55, 40, 15, 15,
20, 20, 20, 40, 40, 20, 20, 20,
55, 55, 55, 55, 55, 55, 55, 25,
70, 70, 70, 70, 70, 70, 70, 70,
0,  0,  0,  0,  0,  0,  0,  0,  // not reachable for pawn
};






class Evaluation
{
	int scorePosition(Piece piece, Square sq, bool isLateGame);
	int pawnEvalFile(Board& b, U8 file, Side side, Bitboard pawns, Bitboard pawnsEnemy);

public: 
	int evaluateBoard(Board& b);

};